#!/usr/bin/env bash

if which doas >/dev/null; then
    su=doas
elif which sudo >/dev/null; then
    su=sudo
else
    echo "[ERROR] Cannot get root access"
    exit 1
fi

if [ -f "pkgit" ]; then
    $su chmod +x *
    $su cp pkgit /usr/bin
else
    "$su" curl "https://raw.githubusercontent.com/dacctal/pkgit/refs/heads/main/pkgit" >>pkgit
    "$su" chmod +x pkgit
    "$su" mv pkgit /usr/bin
fi
